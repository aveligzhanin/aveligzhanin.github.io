<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>PL/SQL</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <!-- Our style -->
    <link rel="stylesheet" type="text/css" href="/assets/css/styles.css">
	<link rel="stylesheet" type="text/css" href="/assets/css/avel.css">
</head>

  <body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light navbar-fixed-top">
  <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Сайт Велигжанина Андрея</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse menu">
			<ul class="nav navbar-nav navbar-right">
                 
                    <li>
                       <a href="/index.html#about">Обо мне</a>
                    </li>
                 
                    <li>
                       <a href="/index.html#education">Образование</a>
                    </li>
                 
                    <li>
                       <a href="/index.html#work">Работа</a>
                    </li>
                 
                    <li>
                       <a href="/index.html#skills">Навыки</a>
                    </li>
                 
                    <li>
                       <a href="/index.html#portfolio">Портфолио</a>
                    </li>
                 
                    <li>
                       <a href="/index.html#hobby">Увлечения</a>
                    </li>
                 
                    <li>
                       <a href="/index.html#contact">Контакты</a>
                    </li>
                 
        	</ul>
        </div>
      </div>
  </div>
</nav>

    <section class="pfblock"><div class="container">  		<!-- Translations -->
	<div class="col-xs-6" align=left>
		<a href="/index.html">home</a> \ <a href="/pages/skills/oracle.html">Oracle</a>
	</div>

	<div class="col-xs-6" align=right>
		Написано: 21.12.2022
	</div>

   	<div class="col-sm-12 my">
		<h1 id="database-concepts-концепции-баз-данных">Database Concepts (концепции баз данных).</h1>

<p><img src="/assets/images/oracle_concepts.jpg" alt="Concepts" /></p>

<h2 id="1-введение-в-базу-данных-oracle">1. Введение в базу данных Oracle.</h2>

<h3 id="о-реляционных-базах-данных">О реляционных базах данных</h3>

<p>У каждой организации есть информация, которую она должна хранить и управлять ею, чтобы соответствовать своим требованиям. Например, корпорация должна собирать и вести кадровую документацию для своих сотрудников. Эта информация должна быть доступна тем, кто в ней нуждается.</p>

<p><strong>Информационная система</strong> – это формальная система для хранения и обработки информации. 
Информационная система может представлять собой набор картонных коробок, содержащих папки из манильской бумаги вместе с правилами хранения и извлечения папок. 
Однако большинство компаний сегодня используют базу данных для автоматизации своих информационных систем. 
<code>&nbsp;&nbsp;База данных &#8212; это организованный набор информации, рассматриваемый как единое целое.&nbsp;&nbsp;</code>
Целью базы данных является сбор, хранение и извлечение связанной информации для использования приложениями баз данных.</p>

<h4 id="система-управления-базами-данных-субд"><strong>Система управления базами данных (СУБД)</strong></h4>

<p><strong>Система управления базами данных (СУБД)</strong> – это ПО, которое управляет хранением, организацией и извлечением данных.</p>

<p>Как правило, СУБД содержит следующие элементы:</p>

<ul>
  <li><strong>Код ядра</strong> 
Этот код управляет памятью и хранилищем для СУБД.</li>
  <li><strong>Хранилище метаданных</strong><br />
Это хранилище обычно называется <strong>словарем данных</strong>.</li>
  <li><strong>Язык запросов</strong> 
Этот язык позволяет приложениям получать доступ к данным.</li>
</ul>

<p><strong>Приложение базы данных</strong> – это ПО, которое взаимодействует с базой данных для доступа к данным и управления ими.</p>

<p>Первое поколение систем управления базами данных включало следующие типы:</p>

<ul>
  <li><strong>Иерархическую</strong>
Иерархическая база данных организует данные в виде древовидной структуры. Каждая родительская запись имеет одну или несколько дочерних записей, аналогично структуре файловой системы.</li>
  <li><strong>Сетевую</strong>
Сетевая база данных похожа на иерархическую, за исключением того, что записи имеют отношение “многие ко многим”, а не “один ко многим”.</li>
</ul>

<p>Ранние СУБД хранили данные в жестких, заранее определенных взаимосвязях. Поскольку не существовало языка определения данных, изменение структуры данных было затруднено. Кроме того, в этих системах отсутствовал простой язык запросов, что затрудняло разработку приложений.</p>

<h4 id="реляционная-модель"><strong>Реляционная модель</strong></h4>

<p>В своей основополагающей статье 1970 года “Реляционная модель данных для больших совместно используемых банков данных” Э. Ф. Кодд определил реляционную модель, основанную на математической теории множеств. Сегодня наиболее широко принятой моделью базы данных является реляционная модель.</p>

<p><strong>Реляционная база данных</strong> – это база данных, которая соответствует реляционной модели. Реляционная модель имеет следующие основные аспекты:</p>

<ul>
  <li><strong>Структуры</strong>
Четко определенные объекты хранят данные базы данных или получают к ним доступ.</li>
  <li><strong>Операции</strong>
Четко определенные действия позволяют приложениям манипулировать данными и структурами базы данных.</li>
  <li><strong>Правила целостности</strong>
Правила целостности управляют операциями с данными и структурами базы данных.</li>
</ul>

<p>Реляционная база данных хранит данные в виде набора простых отношений. <strong>Отношение</strong> – это набор кортежей. <strong>Кортеж</strong> – это неупорядоченный набор значений атрибутов.</p>

<p><strong>Таблица</strong> – это двумерное представление отношения в виде строк (кортежей) и столбцов (атрибутов). Каждая строка в таблице имеет один и тот же набор столбцов. Реляционная база данных - это база данных, которая хранит данные в виде связей (таблиц). Например, реляционная база данных может хранить информацию о сотрудниках компании в таблице работников, таблице отделений и таблице зарплат.</p>

<h4 id="реляционная-субд"><strong>Реляционная СУБД</strong></h4>

<p>Реляционная модель является основой для <strong>системы управления реляционными базами данных (РСУБД)</strong>. РСУБД перемещает данные в базу данных, сохраняет их и извлекает, чтобы приложения могли ими манипулировать.</p>

<p>РСУБД различает следующие типы операций:</p>

<ul>
  <li>
    <p><strong>Логические</strong> В этом случае приложение указывает, <strong>что</strong> нужно сделать. Например, приложение запрашивает имя сотрудника или добавляет запись о сотруднике в таблицу.</p>
  </li>
  <li>
    <p><strong>Физические</strong> В этом случае РСУБД определяет, <strong>как</strong> все должно быть сделано, и выполняет операцию. Например, после того, как приложение запрашивает таблицу, база данных может использовать индекс для поиска запрошенных строк, считывания данных в память и выполнения многих других шагов, прежде чем возвращать результат пользователю. СУБД хранит и извлекает данные таким образом, чтобы физические операции были прозрачны для приложений баз данных.</p>
  </li>
</ul>

<p>База данных Oracle – это РСУБД. РСУБД, которая реализует объектно-ориентированные функции, такие как определяемые пользователем типы, наследование и полиморфизм, называется <strong>объектно-реляционной системой управления базами данных (ORDBMS)</strong>. БД Oracle расширила реляционную модель до объектно-реляционной модели, что позволяет хранить сложные бизнес-модели в реляционной базе данных.</p>

<h4 id="краткая-история-бд-oracle"><a href="/pages/skills/oracle/history.html">Краткая история БД Oracle</a></h4>

<h3 id="объекты-схемы">Объекты схемы</h3>

<p>Одной из характеристик РСУБД является <strong>независимость</strong> физического хранилища данных от логических структур данных.</p>

<p>В БД Oracle <strong>схема</strong> базы данных представляет собой набор логических структур данных или объектов схемы. Пользователь базы данных владеет схемой базы данных, имя которой совпадает с <strong>именем пользователя</strong>.</p>

<p>Объекты схемы – это созданные пользователем структуры, которые непосредственно ссылаются на данные в базе данных. База данных поддерживает множество типов объектов схемы, наиболее важными из которых являются таблицы и индексы.</p>

<p>Объект схемы – это один из типов объектов базы данных. Некоторые объекты базы данных, такие как профили и роли, не находятся в схемах.</p>

<h4 id="таблицы"><strong>Таблицы</strong></h4>

<p>Таблица описывает сущность, такую как сотрудники.</p>

<p>Вы определяете таблицу с именем таблицы, например “employees”, и набором столбцов. Как правило, при создании таблицы вы присваиваете каждому столбцу имя, тип данных и ширину.</p>

<p>Таблица – это набор строк. Столбец идентифицирует атрибут сущности, описанной в таблице, в то время как строка идентифицирует экземпляр сущности. Например, атрибуты сущности employees соответствуют столбцам для идентификатора сотрудника и фамилии. Строка идентифицирует конкретного сотрудника.</p>

<p>Вы можете дополнительно указать правило, называемое <strong>ограничением целостности</strong>, для столбца. Одним из примеров является ограничение целостности NOT NULL. Это ограничение заставляет столбец содержать значение в каждой строке.</p>

<h4 id="индексы"><strong>Индексы</strong></h4>

<p><strong>Индекс</strong> – это необязательная структура данных, которую можно создать в одном или нескольких столбцах таблицы. Индексы могут повысить производительность поиска данных.</p>

<p>При обработке запроса, база данных может использовать доступные индексы для эффективного поиска запрошенных строк. Индексы полезны, когда приложения часто запрашивают определенную строку или диапазон строк.</p>

<p>Индексы логически и физически независимы от данных. Таким образом, можно удалять и создавать индексы без какого-либо влияния на таблицы или другие индексы. Все приложения продолжают функционировать после удаления индекса.</p>

<h3 id="доступ-к-данным">Доступ к данным</h3>

<p>Общим требованием к СУБД является соблюдение принятых отраслевых стандартов для языка доступа к данным.</p>

<h4 id="язык-структурированных-запросов-sql"><strong>Язык структурированных запросов (SQL)</strong></h4>

<p>SQL – это декларативный язык, основанный на множествах, который предоставляет интерфейс к РСУБД, такой как БД Oracle.</p>

<p>Процедурные языки, такие как C, описывают, <strong>как</strong> всё должно быть сделано. SQL является непроцедурным и описывает, <strong>что</strong> должно быть сделано.</p>

<p>SQL – это стандартный язык ANSI для реляционных баз данных. Все операции с данными в БД Oracle выполняются с использованием инструкций SQL. Например, можно использовать SQL для создания таблиц, запроса и изменения данных в таблицах.</p>

<p>Оператор SQL можно рассматривать как очень простую, но мощную компьютерную программу или инструкцию. Пользователи указывают желаемый результат (например, имена сотрудников), а не способ его получения. Инструкция SQL – это строка текста SQL, такая как следующая:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="n">first_name</span><span class="p">,</span> <span class="n">last_name</span> <span class="k">FROM</span> <span class="n">employees</span><span class="p">;</span>
</code></pre></div></div>

<p>Инструкции SQL позволяют выполнять следующие задачи:</p>

<ul>
  <li>Получать данные.</li>
  <li>Добавлять, изменять и удалять строки в таблице.</li>
  <li>Создавать, заменять, изменять и удалять объекты.</li>
  <li>Контролировать доступ к БД и её объектам.</li>
  <li>Обеспечивать согласованность и целостность БД.</li>
</ul>

<p>SQL объединяет предыдущие задачи на одном согласованном языке. Oracle SQL – это реализация стандарта ANSI. Oracle SQL поддерживает множество функций, выходящих за рамки стандартного SQL.</p>

<h4 id="plsql-и-java"><strong>PL/SQL и Java</strong></h4>

<p><strong>PL/SQL</strong> – это процедурное расширение для Oracle SQL.</p>

<p>PL/SQL интегрирован с БД Oracle, что позволяет использовать все SQL-инструкции, функции и типы данных БД Oracle. Можно использовать PL/SQL для управления потоком SQL-программы, использования переменных и написания процедур обработки ошибок.</p>

<p>Основным преимуществом PL/SQL является возможность хранить логику приложения в самой базе данных. Процедура или функция PL/SQL – это объект схемы, который состоит из набора инструкций SQL и других конструкций PL/SQL, сгруппированных вместе, сохраненных в БД и выполняемых как единое целое для решения конкретной проблемы или выполнения набора связанных задач. Основное преимущество программирования на стороне сервера заключается в том, что встроенная функциональность может быть развернута в любом месте.</p>

<p>БД Oracle также может хранить программные модули, написанные на Java. Хранимая процедура Java – это метод Java, опубликованный в SQL и сохраненный в базе данных для общего использования. Можно вызывать существующие программы PL/SQL из Java и Java-программы из PL/SQL.</p>

<h3 id="управление-транзакциями">Управление транзакциями</h3>

<p>БД Oracle разработана как многопользовательская БД. БД должна гарантировать, что несколько пользователей могут работать одновременно, не повреждая данные друг друга.</p>

<h4 id="транзакции"><strong>Транзакции</strong></h4>

<p><strong>Транзакция</strong> – это логическая атомарная единица работы, содержащая один или несколько операторов SQL.</p>

<p>РСУБД должна иметь возможность группировать инструкции SQL таким образом, чтобы они были либо все зафиксированы, что означает, что они применяются к базе данных, либо все откатаны, что означает, что они отменены.</p>

<p>Иллюстрацией необходимости транзакций является перевод средств со сберегательного счета на расчетный счет. Передача состоит из следующих отдельных операций:</p>

<ol>
  <li>Уменьшение сберегательного счета.</li>
  <li>Увеличение расчётного счета.</li>
  <li>Запись о транзакции в журнале.</li>
</ol>

<p>БД Oracle гарантирует, что все три операции будут успешными или завершатся неудачей как единое целое. Например, если аппаратный сбой препятствует выполнению инструкции в транзакции, то другие инструкции должны быть откатаны.</p>

<p>Транзакции – это одна из функций, которая отличает БД Oracle от файловой системы. Если вы выполняете атомарную операцию, которая обновляет несколько файлов, и если система выходит из строя на полпути, то файлы не будут согласованы. Напротив, транзакция переводит БД Oracle из одного согласованного состояния в другое. Основной принцип транзакции – “всё или ничего”: атомарная операция завершается успешно или терпит неудачу в целом.</p>

<h4 id="параллелизм-данных-data-concurrency"><strong>Параллелизм данных (Data Concurrency)</strong></h4>

<p>Требованием многопользовательской РСУБД является контроль параллелизма данных, который заключается в одновременном доступе к одним и тем же данным несколькими пользователями.</p>

<p>Без контроля параллелизма пользователи могут изменять данные ненадлежащим образом, ставя под угрозу целостность данных. Например, один пользователь может обновить строку, в то время как другой пользователь одновременно обновляет её.</p>

<p>Если несколько пользователей получают доступ к одним и тем же данным, то один из способов управления параллелизмом – заставить пользователей ждать. Однако цель СУБД – сократить время ожидания, чтобы оно либо отсутствовало, либо было незначительным. Все инструкции SQL, изменяющие данные, должны выполняться с минимальным вмешательством, насколько это возможно. Необходимо избегать деструктивных взаимодействий, которые представляют собой взаимодействия, которые неправильно обновляют данные или изменяют базовые структуры данных.</p>

<p>БД Oracle использует блокировки для управления одновременным доступом к данным. Блокировка – это механизм, который предотвращает деструктивное взаимодействие между транзакциями, обращающимися к общему ресурсу. Блокировки помогают обеспечить целостность данных, обеспечивая при этом максимальный одновременный доступ к данным.</p>

<h4 id="согласованность-data-consistency"><strong>Согласованность (Data Consistency)</strong></h4>

<p>В БД Oracle каждый пользователь должен видеть согласованное представление данных, включая видимые изменения, внесенные собственными транзакциями пользователя и зафиксированными транзакциями других пользователей.</p>

<p>Например, БД должна предотвращать проблему <strong>грязного чтения</strong>, которая возникает, когда одна транзакция видит незафиксированные изменения, внесенные другой параллельной транзакцией.</p>

<p>БД Oracle всегда обеспечивает согласованность чтения на уровне инструкций, что гарантирует, что данные, возвращаемые одним запросом, зафиксированы и непротиворечивы в течение одного момента времени. В зависимости от уровня изоляции транзакции, этот момент является временем, в которое была открыта инструкция, или временем начала транзакции. Функция запроса Oracle Flashback Query позволяет явно указывать этот момент времени.</p>

<p>БД также может обеспечивать согласованность чтения для всех запросов в транзакции, известную как согласованность чтения на уровне транзакции. В этом случае каждый оператор в транзакции видит данные из одного и того же момента времени, который является временем начала транзакции.</p>

<h3 id="архитектура-базы-данных-oracle"><a href="/pages/skills/oracle/architecture.html">Архитектура базы данных Oracle</a></h3>

<h3 id="дорожная-карта-документации-по-базе-данных-oracle">Дорожная карта документации по базе данных Oracle</h3>

<h2 id="часть-i-мультиарендная-архитектура">Часть I. Мультиарендная Архитектура.</h2>

<h3 id="2-cdbs-и-pdbs">2. CDBs и PDBs</h3>

<h3 id="3-контейнеры-для-приложений">3. Контейнеры для приложений</h3>

<h2 id="часть-ii-реляционные-структуры-данных-oracle">Часть II Реляционные структуры данных Oracle</h2>

<h3 id="4-таблицы-и-кластеры-таблиц">4. Таблицы и кластеры таблиц</h3>

<h3 id="5-индексы-и-индексно-организованные-таблицы">5. Индексы и индексно-организованные таблицы</h3>

<h3 id="6-партиции-представления-и-другие-объекты-схемы">6. Партиции, Представления, и другие объекты схемы.</h3>

<h3 id="7-целостность-данных-data-integrity">7. Целостность данных (Data Integrity).</h3>

<h3 id="8-словарь-данных-и-динамические-представления-производительности">8. Словарь данных и динамические представления производительности.</h3>

<h2 id="часть-iii-доступ-к-данным-oracle">Часть III Доступ к данным Oracle</h2>

<h3 id="9-sql">9. SQL</h3>

<h3 id="10-программирование-на-стороне-сервера-plsql-и-java">10. Программирование на стороне сервера: PL/SQL и Java.</h3>

<h2 id="часть-iv-управление-транзакциями-oracle">Часть IV Управление транзакциями Oracle</h2>

<h3 id="11-параллелизм-и-согласованность-данных-data-concurrency-and-consistency">11. Параллелизм и согласованность данных (Data Concurrency and Consistency)</h3>

<h3 id="12-транзакции">12. Транзакции.</h3>

<h2 id="часть-v-структуры-хранения-баз-данных-oracle">Часть V Структуры хранения баз данных Oracle</h2>

<h3 id="13-физические-структуры-хранения">13. Физические структуры хранения.</h3>

<h3 id="14-логические-структуры-хранения">14. Логические структуры хранения.</h3>

<h2 id="часть-vi-архитектура-экземпляра-oracle">Часть VI Архитектура экземпляра Oracle</h2>

<h3 id="15-экземпляр-базы-данных-oracle">15. Экземпляр базы данных Oracle</h3>

<h3 id="16-архитектура-памяти">16. Архитектура памяти</h3>

<h3 id="17-архитектура-процесса">17. Архитектура процесса</h3>

<h3 id="18-архитектура-приложений-и-сетевых-служб-oracle">18. Архитектура приложений и сетевых служб Oracle</h3>

   	</div>
</div></section>

    <footer class="footer hexlet-footer py-5 mt-5 text-muted">
  <div class="container">
    <div class="row mt-1">
      <div class="col-12 text-center">
        <a href="https://aveligzhanin.github.io/">Велигжанин Андрей</a> — Программист-разработчик C++ и Oracle.
      </div>
    </div>
  </div>
</footer>

  </body>
</html>